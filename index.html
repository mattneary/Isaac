<html>
	<head>
		<title>Graphics Engine</title>
		<script src="jquery-1.6.2.min.js"></script>		
		<script src="engine.jquery.js"></script>
	</head>
	<body>
		<canvas id="cvs"></canvas>
		<script>	
			var int			/*Animation Interval*/,
				cvs 		= document.getElementById('cvs'),
				ctx 		= cvs.getContext('2d'),
				characters 	= new CharacterList({}),
				width 		= height = 500;
			cvs.width 		= width,
			cvs.height 		= height,
			score			= 0,
			//Character with empty shape and text function to show score
			scoreboard		= new Character({
				shapes: [new Rect({
							x: 0,
							y: 500,
							width: 0,
							height: 50,
							color: '#cfcceb'
						})], 
				text: function() {
					return "Score: "+score;
				},
				title: "score_board"
			});
									
			//Score-board
			var incrementScore = function() {
				score++;
				
				//Set color for score
				ctx.fillStyle = '#cfcceb';
				
				//Potentially handle scores here
			};
											
			//Instances of characters	
			var person 		= new Character({
				shapes: [new Rect({
							x: 25,
							y: 25,
							size: 25
						})], 
				title: "person", 
				speeds: {
					x: function(t) {																						
						if( isDown("A") ) return -5;
						if( isDown("D") ) return 5;
						return 0;
					},
					y: function(t) {
						if( isDown("S") ) return -5;
						if( isDown("W") ) return 5;
						return 0;
					}
				}, 
				collisions: {
					apple: function() {
						apple.kill();
						generateApple();
						incrementScore();
					}				
				}
			});				
			var apple;
			var generateApple = function() {
				apple 	= new Character({
					shapes: [new Rect({
								x: Math.random()*500,
								y: Math.random()*500,
								size: 10,
								color: "#f00"
							})], 
					title: "apple", 
					speeds: {
						x: function(t) {
							return 0;
						},
						y: function(t) {
							return 0;
						}
					}
				});
			};
			generateApple();															
			
			//GO!
			go(characters);
			setTimeout(function() {
				//Limit time to 15 secs until animation is cancelled
				clearInterval(int);
				(new Character({
					shapes: [new Rect({
								x: 100,
								y: 300,
								width: 0,
								height: 50,
								color: '#f00'
							})], 
					text: function() {
						return "Game Over (Score: "+score+")";
					},
					title: "score_board"
				})).shade();
			}, 15e3)
		</script>
	</body>
</html>